<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>分析</title>
    <link rel="stylesheet" href="jsp/css/bootstrap.min.css">
    <link rel="stylesheet" href="jsp/assets/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="jsp/css/style.css">
    <link rel="stylesheet" href="jsp/css/style_.css">
    <link rel="stylesheet" href="jsp/css/style_test.css"/>
    <link rel="stylesheet" href="jsp/assets/layui/css/layui.css">
    <link rel="shortcut icon" href="jsp/img/ico2.png">
</head>
<body>
<section id="container" class="">
    <header class="header white-bg">
        <!--<div class="sidebar-toggle-box">
            <i class="fa fa-align-justify"></i>
        </div>-->
        <!--logo start-->
        <a href="index.html" class="logo"><span class="indexspan">  Monitor</span></a>
        <!--logo end-->
        <!--<div class="nav notify-row" id="top_menu">
            &lt;!&ndash;  notification start &ndash;&gt;
            <ul class="nav top-menu">
                &lt;!&ndash; settings start &ndash;&gt;
                <li class="dropdown">
                    <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                        <i class="fa fa-server"></i>
                        <span class="badge bg-success">6</span>
                    </a>
                </li>
                &lt;!&ndash; settings end &ndash;&gt;
                &lt;!&ndash; inbox dropdown start&ndash;&gt;
                <li id="header_inbox_bar" class="dropdown">
                    <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                        <i class="fa fa-envelope-o"></i>
                        <span class="badge bg-important">5</span>
                    </a>
                </li>
                &lt;!&ndash; inbox dropdown end &ndash;&gt;
                &lt;!&ndash; notification dropdown start&ndash;&gt;
                <li id="header_notification_bar" class="dropdown">
                    <a data-toggle="dropdown" class="dropdown-toggle" href="#">

                        <i class="fa fa-bell"></i>
                        <span class="badge bg-warning">7</span>
                    </a>
                </li>
                &lt;!&ndash; notification dropdown end &ndash;&gt;
            </ul>
            &lt;!&ndash;  notification end &ndash;&gt;
        </div>
        <div class="top-nav ">
            &lt;!&ndash;search & user info start&ndash;&gt;
            <ul class="nav pull-right top-menu">
                <li>
                    <input type="text" class="form-control search" placeholder="Search">
                </li>
                &lt;!&ndash; user login dropdown start&ndash;&gt;
                <li class="dropdown">
                    <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                        <img alt="" src="img/avatar1_small.jpg">
                        <span class="username">Jhon Doue</span>
                        <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu extended logout">
                        <div class="log-arrow-up"></div>
                        <li><a href="#"><i class=" icon-suitcase"></i>Profile</a></li>
                        <li><a href="#"><i class="icon-cog"></i> Settings</a></li>
                        <li><a href="#"><i class="icon-bell-alt"></i> Notification</a></li>
                        <li><a href="login.html"><i class="icon-key"></i> Log Out</a></li>
                    </ul>
                </li>
                &lt;!&ndash; user login dropdown end &ndash;&gt;
            </ul>
            &lt;!&ndash;search & user info end&ndash;&gt;
        </div>-->
        <div>
            <ul class="layui-nav indexOut">
                <li class="layui-nav-item">
                    <a href="javascript:;" class="color8">admin</a>
                    <dl class="layui-nav-child">
                        <dd><a href="login.html">退出</a></dd>
                    </dl>
                </li>
            </ul>
        </div>
    </header>
    <aside>
        <div id="sidebar" class="nav-collapse ">
            <!-- sidebar menu start-->
            <ul class="sidebar-menu">
                <li class="sub-menu">
                    <a class="" href="index.html">
                        <i class="fa fa-globe "></i>
                        <span class="font14px">总览</span>
                    </a>
                </li>
                <!--<li class="sub-menu">
                    <a class="" href="#">
                        <i class="fa fa-dashboard "></i>
                        <span>仪表盘</span>
                    </a>
                </li>
                <li class="sub-menu">
                    <a href="#" class="">
                        <i class="fa fa-sitemap"></i>
                        <span>拓扑图</span>
                    </a>
                </li>-->
                <li class="sub-menu">
                    <a href="service.html" class="">
                        <i class="fa fa-codepen"></i>
                        <span class="font14px">业务视图</span>
                    </a>
                </li>
                <li class="sub-menu">
                    <a href="Infrastructure.html" class="" onclick="cleanCookie()">
                        <i class="fa fa-server"></i>
                        <span class="font14px">资源池监控</span>
                    </a>
                </li>
                <li class="sub-menu">
                    <a href="fault.html" class="">
                        <i class="fa fa-bell"></i>
                        <span class="font14px">故障告警</span>
                    </a>
                </li>
                <!--<li>
                    <a class="sub-menu" href="#">
                        <i class="fa fa-adn"></i>
                        <span>自动化</span>
                    </a>
                </li>-->
                <li class="active">
                    <a href="analysis.html" class="">
                        <i class="fa fa-bar-chart"></i>
                        <span class="font14px">分析</span>
                    </a>
                </li>
                <li>
                    <a class="sub-menu" href="set.html">
                        <i class="fa fa-gears"></i>
                        <span class="font14px">设置</span>
                    </a>
                </li>
            </ul>
            <img src="jsp/img/89583768002741918.png" class="logo">
            <!-- sidebar menu end-->
        </div>
    </aside>
    <section id="main-content">
        <section class="wrapper" id="analysis">
            <div class="row">
                <div class="col-xs-12">
                    <div class="panel">
                        <div class="panel-heading">
                            <h4 class="c-title">分析</h4>
                        </div>
                        <div class="panel-body">
                            <ul class="nav nav-tabs user-nav">
                                <li class="active" v-on:click="switching()"><a href="#data" data-toggle="tab"
                                                                               style="width: auto">数据查询对比</a></li>
                                <li v-on:click="switching()"><a href="#hot" data-toggle="tab">热点分析</a></li>
                            </ul>
                            <div class="tab-content">
                                <div class="tab-pane fade in active" id="data">
                                    <div class="row bs-callout bs-callout-warning">
                                        <div class="row mbottom2">
                                            <div class="col-xs-6">
                                                <span class="userText">查询条件：</span>
                                                <select class="form-control userInput" v-model="selectModel"
                                                        v-on:change="conditionChange">
                                                    <option value="0">同期对比（同一监控项多主机同一时间段）</option>
                                                    <option value="1">周期对比（同一监控项单主机多个时间段）</option>
                                                    <option value="2">筛选数据 （最大值、最小值、平均值）</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row mbottom2">
                                            <div class="col-xs-12">
                                                <button class="btn btn-link" data-toggle="modal"
                                                        data-target="#host">主机:
                                                </button>
                                                <span v-cloak class="tc" v-for="(data,index) in hostView">
                                                    {{data.name}}
                                                    <i class="fa fa-close clo" v-on:click="delHost(index)"></i>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="row mbottom2">
                                            <div class="col-xs-12">
                                                <button class="btn btn-link" data-toggle="modal"
                                                        data-target="#item">监控项:
                                                </button>
                                                <span v-cloak class="tc" v-for="(data,index) in item_">
                                                      {{data.val}}
                                                       <i class="fa fa-close clo" v-on:click="delItem(index)"></i>
                                                    </span>
                                            </div>
                                        </div>
                                        <div class="row mbottom2" v-show="show1">
                                            <span class="userText">时间范围：</span>
                                            <div class="layui-input-inline">
                                                <input type="text" class="layui-input" id="time" placeholder=" - ">
                                            </div>
                                            <div class="layui-input-inline">
                                                <input type="text" class="layui-input" id="time2" placeholder=" - ">
                                            </div>
                                        </div>
                                        <div class="row mbottom2" v-show="show2">
                                            <div class="col-xs-7">
                                                <span class="userText col-xs-1" style="line-height: 38px">时间范围：</span>
                                                <div class="layui-input-inline">
                                                    <input type="text" class="layui-input" id="test"
                                                           placeholder=" - ">
                                                </div>
                                                <div class="layui-input-inline">
                                                    <input type="text" class="layui-input" id="test_"
                                                           placeholder=" - ">
                                                </div>
                                                <button class="btn btn-primary" v-on:click="addTime">添加</button>
                                            </div>
                                            <div class="col-xs-5">
                                                <span class="userText">间隔:</span>
                                                <select class="form-control userInput" v-model="intervalModel"
                                                        v-on:change="intervalChange">
                                                    <option value="3600">1小时</option>
                                                    <option value="21600">6小时</option>
                                                    <option value="43200">12小时</option>
                                                    <option value="86400">1天</option>
                                                    <option value="604800">1周</option>
                                                    <option value="2592000">30天</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row mbottom2" v-for="(data,index) in time" v-show="show2">
                                            <div class="marginleft100">
                                                <div class="layui-input-inline">
                                                    <input type="text" class="layui-input start" :id="'test'+index"
                                                           placeholder=" - ">
                                                </div>
                                                <div class="layui-input-inline">
                                                    <input type="text" class="layui-input end" :id="'test_'+index"
                                                           placeholder=" - ">
                                                </div>
                                                <button class="btn btn-danger" v-on:click="delTime(index)">删除</button>
                                            </div>
                                        </div>
                                        <button class="btn btn-success" v-on:click="conditionSubmit">提交</button>
                                    </div>
                                    <div class="row bs-callout bs-callout-info">
                                        <div class="row mbottom2">
                                            <div class="col-xs-8">
                                                <h4 class="c-title">查询结果</h4>
                                            </div>
                                        </div>
                                        <div class="row" v-show="show9">
                                            <div class="col-xs-12">
                                                <div id="chart" style="width: 100%;height: 400px"></div>
                                            </div>
                                        </div>
                                        <div class="row" v-show="show10">
                                            <table class="table table-striped table-bordered">
                                                <thead>
                                                <tr class="success">
                                                    <th>#</th>
                                                    <th>主机</th>
                                                    <th>监控项</th>
                                                    <th>最大</th>
                                                    <th>平均</th>
                                                    <th>最小</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr v-for="(data,index) in da">
                                                    <td v-cloak>{{index+1}}</td>
                                                    <td v-cloak>{{data.hostname}}</td>
                                                    <td v-cloak>{{data.itemname}}</td>
                                                    <td v-cloak>{{data.max}}</td>
                                                    <td v-cloak>{{data.avg}}</td>
                                                    <td v-cloak>{{data.min}}</td>
                                                </tr>
                                                </tbody>
                                            </table>
                                            <button class="btn btn-success" v-on:click="excel">导出excel</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="hot">
                                    <div class="row bs-callout bs-callout-warning">
                                        <div class="row mbottom2">
                                            <div class="col-xs-12">
                                                <span class="userText">键值:</span>
                                                <label>
                                                    <input type="radio" v-model="updateValue" value="0">
                                                    使用默认键值
                                                </label>
                                                <label>
                                                    <input type="radio" v-model="updateValue" value="1">
                                                    自定义键值
                                                </label>

                                            </div>
                                        </div>
                                        <div class="row" v-show="updateValue == 1">
                                            <div class="col-xs-6">
                                                <div class="row mbottom2">
                                                    <span class="userText">CPU键值:</span>
                                                    <input type="text" class="form-control userInput cpuKey">
                                                    <button class="btn btn-primary" v-on:click="addCpuKey(cpuKeyData)">
                                                        添加
                                                    </button>
                                                </div>
                                                <div class="row mbottom2 marlef89" v-for="(data,index) in cpuKeyData">
                                                    <input type="text" class="form-control userInput cpuKey">
                                                    <button class="btn btn-danger"
                                                            v-on:click="delCommon(cpuKeyData,index)">删除
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="col-xs-6">
                                                <div class="row mbottom2">
                                                    <span class="userText">内存键值:</span>
                                                    <input type="text" class="form-control userInput ramKey">
                                                    <button class="btn btn-primary" v-on:click="addCpuKey(ramKeyData)">
                                                        添加
                                                    </button>
                                                </div>
                                                <div class="row mbottom2 marlef89" v-for="(data,index) in ramKeyData">
                                                    <input type="text" class="form-control userInput ramKey">
                                                    <button class="btn btn-danger"
                                                            v-on:click="delCommon(ramKeyData,index)">删除
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mbottom2">
                                            <div class="col-xs-6">
                                                <span class="userText">周期</span>
                                                <select class="form-control userInput" v-model="cycle"
                                                        v-on:change="cycleChange">
                                                    <option value="day">天</option>
                                                    <option value="week">周</option>
                                                    <option value="month">月</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row mbottom2">
                                            <div class="col-xs-12">
                                                <button class="btn btn-link" data-toggle="modal"
                                                        data-target="#host">主机:
                                                </button>
                                                <span class="tc" v-for="(data,index) in hostView" v-cloak>
                                                    {{data.name}}
                                                    <i class="fa fa-close clo" v-on:click="delHost(index)"></i>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="row mbottom2">
                                            <div class="col-xs-12">
                                                <span class="userText">时间范围：</span>
                                                <div class="layui-input-inline">
                                                    <input type="text" class="layui-input" id="hottime"
                                                           placeholder=" - ">
                                                </div>
                                                <div class="layui-input-inline">
                                                    <input type="text" class="layui-input" id="hottime2"
                                                           placeholder=" - ">
                                                </div>
                                            </div>
                                        </div>
                                        <button class="btn btn-success" v-on:click="computSubmit">提交</button>
                                    </div>
                                    <div class="row bs-callout bs-callout-info">
                                        <div class="row mbottom2">
                                            <div class="col-xs-6">
                                                <h4 class="c-title">查询结果</h4>
                                            </div>
                                            <div class="col-xs-6">
                                                <span class="userText">计算方式：</span>
                                                <select class="form-control userInput" v-model="performance"
                                                        v-on:change="performanceChange">
                                                    <option value="max">性能峰值（最大值）</option>
                                                    <option value="avg">性能负载（平均值）</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row" v-show="performance1Max">
                                            <div class="col-xs-6">
                                                <div id="chart3" style="width: 600px;height: 400px"></div>
                                            </div>
                                            <div class="col-xs-6">
                                                <div id="chart2" style="width: 600px;height: 400px"></div>
                                            </div>
                                            <div class="col-xs-6 col-xs-4-analysis">
                                                <span class="btn btn-primary" v-cloak>性能峰值时间点：{{maxTime}}</span>
                                            </div>
                                            <div class="col-xs-6 col-xs-4-analysis">
                                                <span class="btn btn-primary" v-cloak>性能峰值时间点浮动范围：{{floatmin}} - {{floatmax}}</span>
                                            </div>
                                        </div>
                                        <div class="row" v-show="performance1Avg">
                                            <div class="col-xs-6">
                                                <div id="chart4" style="width: 600px;height: 400px"></div>
                                            </div>
                                            <div class="col-xs-6">
                                                <div id="chart5" style="width: 600px;height: 400px"></div>
                                            </div>
                                            <div class="col-xs-4 col-xs-4-analysis">
                                                <span class="btn btn-primary" v-cloak>综合性能负载率：{{avgNum}}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel-footer text-align-center">
                            © 2017 - 2019, JKSTACK. All rights reserved.
                        </div>
                        <div class="modal fade bs-example-modal-sm pos" tabindex="-1" role="dialog"
                             aria-labelledby="mySmallModalLabel"
                             aria-hidden="true" data-backdrop="static" data-keyboard="false"
                             style="overflow: auto" id="hostGroup">
                            <div class="modal-dialog modal-sm mid2">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal"
                                                aria-label="Close"><span aria-hidden="true">&times;</span>
                                        </button>
                                        <h3 class="modal-title color4">选择主机组</h3>
                                    </div>
                                    <div class="modal-body">
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <select size="10" class="form-control" multiple="multiple"
                                                        v-model="hostGroupModel">
                                                    <option v-for="(data,index) in hostGroup" :value="index" v-cloak>
                                                        {{data.name}}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                                        </button>
                                        <button type="button" class="btn btn-primary pull-left"
                                                v-on:click="addHostGroup">
                                            提交
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal fade bs-example-modal-sm pos" tabindex="-1" role="dialog"
                             aria-labelledby="mySmallModalLabel"
                             aria-hidden="true" data-backdrop="static" data-keyboard="false"
                             style="overflow: auto" id="host">
                            <div class="modal-dialog modal-sm mid2">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal"
                                                aria-label="Close"><span aria-hidden="true">&times;</span>
                                        </button>
                                        <h3 class="modal-title color4">选择主机</h3>
                                    </div>
                                    <div class="modal-body">
                                        <div class="row mbottom2">
                                            <div class="col-xs-12">
                                                <span>选择主机组：</span>
                                                <select class="form-control usersName_" v-model="hostGroupModel2"
                                                        v-on:change="getHostByHostGroup">
                                                    <option v-for="(data,index) in hostGroup" :value="data.groupid"
                                                            v-cloak>
                                                        {{data.name}}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row" v-show="show5">
                                            <div class="col-xs-12">
                                                <select size="10" class="form-control" multiple="multiple"
                                                        v-model="hostModel">
                                                    <option v-for="(data,index) in host2" :value="index" v-cloak>
                                                        {{data.name}}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row" v-show="show6">
                                            <div class="col-xs-12">
                                                <select size="10" class="form-control" v-model="hostModel">
                                                    <option v-for="(data,index) in host2" :value="index" v-cloak>
                                                        {{data.name}}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                                        <button type="button" class="btn btn-primary pull-left" v-on:click="addHost">
                                            提交
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal fade bs-example-modal-sm pos" tabindex="-1" role="dialog"
                             aria-labelledby="mySmallModalLabel"
                             aria-hidden="true" data-backdrop="static" data-keyboard="false"
                             style="overflow: auto" id="item">
                            <div class="modal-dialog modal-sm mid2">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal"
                                                aria-label="Close"><span aria-hidden="true">&times;</span>
                                        </button>
                                        <h3 class="modal-title color4">选择监控项</h3>
                                    </div>
                                    <div class="modal-body">
                                        <!-- <div class="row mbottom2">
                                             <div class="col-xs-12">
                                                 <span>选择主机组：</span>
                                                 <select class="form-control usersName_" v-model="hostGroupModel2"
                                                         v-on:change="getHostByHostGroup">
                                                     <option v-for="(data,index) in hostGroup" :value="data.groupid">
                                                         {{data.name}}
                                                     </option>
                                                 </select>
                                             </div>
                                         </div>-->
                                        <!--<div class="row mbottom2">
                                            <div class="col-xs-12">
                                                <span>选择主机：</span>
                                                <select class="form-control usersName_" v-model="host2Model"
                                                        v-on:change="getApplicationByHost">
                                                    <option v-for="(data,index) in host2" :value="data.id">
                                                        {{data.name}}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>-->
                                        <div class="row mbottom2">
                                            <div class="col-xs-12">
                                                <span>选择应用集：</span>
                                                <select class="form-control usersName_" v-model="application_Model"
                                                        v-on:change="getItem">
                                                    <option v-for="(data,index) in application"
                                                            :value="data.applicationid" v-cloak>{{data.name}}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row" v-show="show7">
                                            <div class="col-xs-12">
                                                <select size="10" class="form-control" multiple="multiple"
                                                        v-model="itemModel">
                                                    <option v-for="(data,index) in item" :value="index" v-cloak>
                                                        {{data.val}}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row" v-show="show8">
                                            <div class="col-xs-12">
                                                <select size="10" class="form-control" v-model="itemModel">
                                                    <option v-for="(data,index) in item" :value="index" v-cloak>
                                                        {{data.val}}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                                        <button type="button" class="btn btn-primary pull-left" v-on:click="itemPush">
                                            提交
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </section>
</section>
<script src="jsp/js/jquery-3.2.1.min.js"></script>
<script src="jsp/js/jquery.cookie.js"></script>
<script src="jsp/js/bootstrap.min.js"></script>
<script src="jsp/js/vue.min.js"></script>
<script src="jsp/js/echarts.min.js"></script>
<script src="jsp/js/macarons.js"></script>
<script src="jsp/js/dark.js"></script>
<script src="jsp/js/infographic.js"></script>
<script src="jsp/js/roma.js"></script>
<script src="jsp/js/shine.js"></script>
<script src="jsp/js/vintage.js"></script>
<script src="jsp/assets/layui/layui.js"></script>
<script src="jsp/js/analysis.js"></script>
</body>
</html>
