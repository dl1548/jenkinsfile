<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>故障告警</title>
    <link rel="stylesheet" href="jsp/css/bootstrap.min.css">
    <link rel="stylesheet" href="jsp/assets/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="jsp/css/style.css">
    <link rel="stylesheet" href="jsp/css/style_.css">
    <link rel="stylesheet" href="jsp/css/style_test.css"/>
    <link rel="stylesheet" href="jsp/assets/layui/css/layui.css">
    <link rel="shortcut icon" href="jsp/img/ico2.png" >
    <link rel="stylesheet" href="jsp/css/jquery.mloading.css"/>
</head>
<body>
<section id="container" class="">
    <header class="header white-bg">
        <!-- <div class="sidebar-toggle-box">
             <i class="fa fa-align-justify"></i>
         </div>-->
        <!--logo start-->
        <a href="index.html" class="logo"><span class="indexspan">  Monitor</span></a>
        <!--logo end-->
        <!--<div class="nav notify-row" id="top_menu">
            &lt;!&ndash;  notification start &ndash;&gt;
            <ul class="nav top-menu">
                &lt;!&ndash; settings start &ndash;&gt;
                <li class="dropdown">
                    <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                        <i class="fa fa-server"></i>
                        <span class="badge bg-success">6</span>
                    </a>
                </li>
                &lt;!&ndash; settings end &ndash;&gt;
                &lt;!&ndash; inbox dropdown start&ndash;&gt;
                <li id="header_inbox_bar" class="dropdown">
                    <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                        <i class="fa fa-envelope-o"></i>
                        <span class="badge bg-important">5</span>
                    </a>
                </li>
                &lt;!&ndash; inbox dropdown end &ndash;&gt;
                &lt;!&ndash; notification dropdown start&ndash;&gt;
                <li id="header_notification_bar" class="dropdown">
                    <a data-toggle="dropdown" class="dropdown-toggle" href="#">

                        <i class="fa fa-bell"></i>
                        <span class="badge bg-warning">7</span>
                    </a>
                </li>
                &lt;!&ndash; notification dropdown end &ndash;&gt;
            </ul>
            &lt;!&ndash;  notification end &ndash;&gt;
        </div>
        <div class="top-nav ">
            &lt;!&ndash;search & user info start&ndash;&gt;
            <ul class="nav pull-right top-menu">
                <li>
                    <input type="text" class="form-control search" placeholder="Search">
                </li>
                &lt;!&ndash; user login dropdown start&ndash;&gt;
                <li class="dropdown">
                    <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                        <img alt="" src="img/avatar1_small.jpg">
                        <span class="username">Jhon Doue</span>
                        <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu extended logout">
                        <div class="log-arrow-up"></div>
                        <li><a href="#"><i class=" icon-suitcase"></i>Profile</a></li>
                        <li><a href="#"><i class="icon-cog"></i> Settings</a></li>
                        <li><a href="#"><i class="icon-bell-alt"></i> Notification</a></li>
                        <li><a href="login.html"><i class="icon-key"></i> Log Out</a></li>
                    </ul>
                </li>
                &lt;!&ndash; user login dropdown end &ndash;&gt;
            </ul>
            &lt;!&ndash;search & user info end&ndash;&gt;
        </div>-->
        <div>
            <ul class="layui-nav indexOut">
                <li class="layui-nav-item">
                    <a href="javascript:;" class="color8">admin</a>
                    <dl class="layui-nav-child">
                        <dd><a href="login.html">退出</a></dd>
                    </dl>
                </li>
            </ul>
        </div>
    </header>
    <aside>
        <div id="sidebar" class="nav-collapse ">
            <!-- sidebar menu start-->
            <ul class="sidebar-menu">
                <li class="sub-menu">
                    <a href="index.html" class="">
                        <i class="fa fa-globe "></i>
                        <span class="font14px">总览</span>
                    </a>
                </li>
                <!--<li class="sub-menu">
                    <a class="" href="#">
                        <i class="fa fa-dashboard "></i>
                        <span>仪表盘</span>
                    </a>
                </li>
                <li class="sub-menu">
                    <a href="#" class="">
                        <i class="fa fa-sitemap"></i>
                        <span>拓扑图</span>
                    </a>
                </li>-->
                <li class="sub-menu">
                    <a href="service.html" class="">
                        <i class="fa fa-codepen"></i>
                        <span class="font14px">业务视图</span>
                    </a>
                </li>
                <li class="sub-menu">
                    <a href="Infrastructure.html" class="" onclick="cleanCookie()">
                        <i class="fa fa-server"></i>
                        <span class="font14px">资源池监控</span>
                    </a>
                </li>
                <li class="active">
                    <a href="fault.html" class="">
                        <i class="fa fa-bell"></i>
                        <span class="font14px">故障告警</span>
                    </a>
                </li>
                <!--<li class="sub-menu">
                    <a class="" href="#">
                        <i class="fa fa-adn"></i>
                        <span>自动化</span>
                    </a>
                </li>-->
                <li class="sub-menu">
                    <a href="analysis.html" class="">
                        <i class="fa fa-bar-chart"></i>
                        <span class="font14px">分析</span>
                    </a>
                </li>
                <li class="sub-menu">
                    <a class="" href="set.html">
                        <i class="fa fa-gears"></i>
                        <span class="font14px">设置</span>
                    </a>
                </li>
            </ul>
            <img src="jsp/img/89583768002741918.png" class="logo">
            <!-- sidebar menu end-->
        </div>
    </aside>
    <section id="main-content">
        <section class="wrapper" id="fault">
            <div class="panel">
                <div class="panel-heading">
                    <h4 class="c-title">故障告警</h4>
                </div>
                <div class="panel-body panel-body-height-fault">
                    <div class="bs-callout bs-callout-warning">
                        <div class="row mbottom2">
                            <div class="col-xs-10 c-title">
                                查询条件:
                            </div>
                            <div class="col-xs-2">
                                <button class="btn btn-success" v-on:click="falutSubmit(hostGroupModel,hostModel,minFalut,falutTime,hisFal)">提交</button>
                            </div>
                        </div>
                        <div class="row mbottom2">
                            <div class="col-xs-6">
                                <span class="userText">主机组：</span>
                                <select class="form-control userInput" v-model="hostGroupModel">
                                    <option value="">未选择</option>
                                    <option :value="index" v-for="(data,index) in hostGroup" v-cloak>{{data.name}}</option>
                                </select>
                            </div>
                            <div class="col-xs-6">
                                <span class="userText">主机：</span>
                                <select class="form-control userInput" v-model="hostModel">
                                    <option value="">未选择</option>
                                    <option :value="index" v-for="(data,index) in host" v-cloak>{{data.name}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="row mbottom2">
                            <div class="col-xs-6">
                                <span class="userText">最小故障级别：</span>
                                <select class="form-control userInput" v-model="minFalut">
                                    <option value="0">未分类</option>
                                    <option value="1">信息</option>
                                    <option value="2">警告</option>
                                    <option value="3">一般</option>
                                    <option value="4">高</option>
                                    <option value="5">灾难</option>
                                </select>
                            </div>
                            <div class="col-xs-6">
                                <span class="userText">持续时间小于：</span>
                                <input type="number" class="form-control userInput" v-model="falutTime">
                                <span>天</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6">
                                <span class="userText">触发状态：</span>
                                <select class="form-control userInput" v-model="hisFal">
                                    <option value="0">所有故障</option>
                                    <option value="1">故障</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="bs-callout bs-callout-info">
                        <div class="row mbottom2">
                            <div class="col-xs-12">
                                <input type="text" class="form-control u-search" placeholder="模糊查询" v-model="falutSearch">
                            </div>
                        </div>
                        <div id="load">
                            <table class="table table-striped">
                                <thead>
                                <tr class="success">
                                    <td>#</td>
                                    <td>等级</td>
                                    <td>名称</td>
                                    <td>状态</td>
                                    <td>主机</td>
                                    <td>最后变更</td>
                                    <td>持续时间</td>
                                    <td>动作</td>
                                </tr>
                                </thead>
                                <tbody>
                                <tr v-for="(data,index) in sea">
                                    <td v-cloak id="value-1">{{index+1}}</td>
                                    <td v-cloak><span :class="data.lvcss">{{data.lv}}</span></td>
                                    <td v-cloak>{{data.description}}</td>
                                    <td v-cloak><span :class="data.stacss">{{data.val}}</span></td>
                                    <td v-cloak><span class="ip-span-infrastructure" v-on:click="jump(data.hosts[0].host)" style="cursor:pointer">{{data.hosts[0].host}}</span></td>
                                    <td v-cloak>{{data.lasttime}}</td>
                                    <td v-cloak>{{data.time}}</td>
                                    <td>
                                        <button class="btn btn-info" v-on:click="show(data.triggerid,data.hosts[0].hostid,data.lastEvent.eventid)"
                                                data-toggle="modal" data-target="#show">显示</button>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="modal fade bs-example-modal-sm pos" tabindex="-1" role="dialog"
                         aria-labelledby="mySmallModalLabel"
                         aria-hidden="true" data-backdrop="static" data-keyboard="false"
                         style="overflow: auto" id="show">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal"
                                            aria-label="Close"><span aria-hidden="true">&times;</span>
                                    </button>
                                    <h3 class="modal-title color4">显示</h3>
                                </div>
                                <div class="modal-body">
                                        <table class="table table-striped">
                                            <thead>
                                            <tr>
                                                <td>#</td>
                                                <td>通知用户</td>
                                                <td>通知方式</td>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr v-for="(data,index) in u">
                                                <td v-cloak>{{index+1}}</td>
                                                <td v-cloak>{{data.name}}</td>
                                                <td v-cloak>{{data.typ}}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel-footer text-align-center backwhite">
                    © 2017 - 2019, JKSTACK. All rights reserved.
                </div>
            </div>
        </section>
    </section>
</section>
<script src="jsp/js/jquery-3.2.1.min.js"></script>
<script src="jsp/js/jquery.cookie.js"></script>
<script src="jsp/js/bootstrap.min.js"></script>
<script src="jsp/js/vue.min.js"></script>
<script src="jsp/js/echarts.min.js"></script>
<script src="jsp/js/macarons.js"></script>
<script src="jsp/js/dark.js"></script>
<script src="jsp/js/infographic.js"></script>
<script src="jsp/js/roma.js"></script>
<script src="jsp/js/shine.js"></script>
<script src="jsp/js/vintage.js"></script>
<script src="jsp/assets/layui/layui.js"></script>
<script src="jsp/js/jquery.mloading.js" type="text/javascript"></script>
<script src="jsp/js/fault.js"></script>
</body>
</html>
